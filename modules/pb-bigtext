#!/usr/bin/perl
# Module Name: pb-bigtext
# Purpose: ANSI big text generator using CP437 block/shade characters
#          and Unicode quadrant block characters (miniwi font)
#
# Renders text as large block letters for headers, banners, and titles.
# Supports multiple fonts, styles, ANSI color, terminal width centering,
# and PETSCII fallback for C64 40-column mode.
#
# Fonts:

use utf8;
#   'block'  - 5-row tall letters using CP437 block/shade chars (default)
#   'miniwi' - 3-4 row compact letters using Unicode quadrant blocks
#   'bloody' - 10-row elaborate dripping/horror style using Unicode shade blocks
#
# Usage:
#   my @lines = bigtext("HELLO");
#   my @lines = bigtext("PHOTON", font => 'miniwi', color => $RED);
#   bigtext_write("WELCOME", color => $config{'themecolor'}, center => 1);

# ============================================================================
# CP437 BLOCK/SHADE CHARACTER HELPERS
# ============================================================================

# Return the appropriate block character for the current terminal mode
sub _bt_char {
  my ($type) = @_;
  my $width = $config{'terminal_width'} || 80;

  # CP437 block and shade characters
  my %chars = (
    'full'       => { cp437 => chr(219), petscii => chr(160) },  # █ / PETSCII full block
    'lower'      => { cp437 => chr(220), petscii => chr(162) },  # ▄
    'left'       => { cp437 => chr(221), petscii => chr(161) },  # ▌
    'right'      => { cp437 => chr(222), petscii => chr(161) },  # ▐
    'upper'      => { cp437 => chr(223), petscii => chr(163) },  # ▀
    'light'      => { cp437 => chr(176), petscii => chr(165) },  # ░
    'medium'     => { cp437 => chr(177), petscii => chr(166) },  # ▒
    'dark'       => { cp437 => chr(178), petscii => chr(160) },  # ▓
  );

  return ' ' unless exists $chars{$type};
  return ($width == 40) ? $chars{$type}{petscii} : $chars{$type}{cp437};
}

# ============================================================================
# FONT: BLOCK (5-row tall, CP437 block/shade characters)
# ============================================================================
# Each character is 5 rows. Cells use these markers:
#   '#' = primary block char (full block in 'block' style, etc.)
#   '.' = space (empty)
# The markers are translated to actual CP437 chars at render time,
# allowing the same font data to work across multiple styles.

sub _bt_font_block {
  my %letters = (
    'A' => [" .##. ",
            " #..# ",
            " #### ",
            " #..# ",
            " #..# "],
    'B' => [" ###. ",
            " #..# ",
            " ###. ",
            " #..# ",
            " ###. "],
    'C' => [" .### ",
            " #... ",
            " #... ",
            " #... ",
            " .### "],
    'D' => [" ###. ",
            " #..# ",
            " #..# ",
            " #..# ",
            " ###. "],
    'E' => [" #### ",
            " #... ",
            " ###. ",
            " #... ",
            " #### "],
    'F' => [" #### ",
            " #... ",
            " ###. ",
            " #... ",
            " #... "],
    'G' => [" .### ",
            " #... ",
            " #.## ",
            " #..# ",
            " .### "],
    'H' => [" #..# ",
            " #..# ",
            " #### ",
            " #..# ",
            " #..# "],
    'I' => [" ### ",
            " .#. ",
            " .#. ",
            " .#. ",
            " ### "],
    'J' => [" .### ",
            " ...# ",
            " ...# ",
            " #..# ",
            " .##. "],
    'K' => [" #..# ",
            " #.#. ",
            " ##.. ",
            " #.#. ",
            " #..# "],
    'L' => [" #... ",
            " #... ",
            " #... ",
            " #... ",
            " #### "],
    'M' => [" #...# ",
            " ##.## ",
            " #.#.# ",
            " #...# ",
            " #...# "],
    'N' => [" #...# ",
            " ##..# ",
            " #.#.# ",
            " #..## ",
            " #...# "],
    'O' => [" .##. ",
            " #..# ",
            " #..# ",
            " #..# ",
            " .##. "],
    'P' => [" ###. ",
            " #..# ",
            " ###. ",
            " #... ",
            " #... "],
    'Q' => [" .##. ",
            " #..# ",
            " #..# ",
            " #.#. ",
            " .#.# "],
    'R' => [" ###. ",
            " #..# ",
            " ###. ",
            " #.#. ",
            " #..# "],
    'S' => [" .### ",
            " #... ",
            " .##. ",
            " ...# ",
            " ###. "],
    'T' => [" ##### ",
            " ..#.. ",
            " ..#.. ",
            " ..#.. ",
            " ..#.. "],
    'U' => [" #..# ",
            " #..# ",
            " #..# ",
            " #..# ",
            " .##. "],
    'V' => [" #..# ",
            " #..# ",
            " #..# ",
            " .##. ",
            " .##. "],
    'W' => [" #...# ",
            " #...# ",
            " #.#.# ",
            " ##.## ",
            " #...# "],
    'X' => [" #..# ",
            " #..# ",
            " .##. ",
            " #..# ",
            " #..# "],
    'Y' => [" #..# ",
            " #..# ",
            " .##. ",
            " ..#. ",
            " ..#. "],
    'Z' => [" #### ",
            " ...# ",
            " ..#. ",
            " .#.. ",
            " #### "],

    # Numbers
    '0' => [" .##. ",
            " #..# ",
            " #..# ",
            " #..# ",
            " .##. "],
    '1' => [" .#. ",
            " ##. ",
            " .#. ",
            " .#. ",
            " ### "],
    '2' => [" .##. ",
            " #..# ",
            " ..#. ",
            " .#.. ",
            " #### "],
    '3' => [" ###. ",
            " ...# ",
            " .##. ",
            " ...# ",
            " ###. "],
    '4' => [" #..# ",
            " #..# ",
            " #### ",
            " ...# ",
            " ...# "],
    '5' => [" #### ",
            " #... ",
            " ###. ",
            " ...# ",
            " ###. "],
    '6' => [" .### ",
            " #... ",
            " #### ",
            " #..# ",
            " .##. "],
    '7' => [" #### ",
            " ...# ",
            " ..#. ",
            " .#.. ",
            " .#.. "],
    '8' => [" .##. ",
            " #..# ",
            " .##. ",
            " #..# ",
            " .##. "],
    '9' => [" .##. ",
            " #..# ",
            " .### ",
            " ...# ",
            " ###. "],

    # Punctuation and symbols
    '!' => [" #. ",
            " #. ",
            " #. ",
            " .. ",
            " #. "],
    '?' => [" .##. ",
            " #..# ",
            " ..#. ",
            " .... ",
            " ..#. "],
    '.' => [" .. ",
            " .. ",
            " .. ",
            " .. ",
            " #. "],
    ',' => [" .. ",
            " .. ",
            " .. ",
            " #. ",
            " #. "],
    ':' => [" .. ",
            " #. ",
            " .. ",
            " #. ",
            " .. "],
    ';' => [" .. ",
            " #. ",
            " .. ",
            " #. ",
            " #. "],
    '-' => [" .... ",
            " .... ",
            " #### ",
            " .... ",
            " .... "],
    '_' => [" .... ",
            " .... ",
            " .... ",
            " .... ",
            " #### "],
    '+' => [" .... ",
            " .#.. ",
            " ###. ",
            " .#.. ",
            " .... "],
    '=' => [" .... ",
            " #### ",
            " .... ",
            " #### ",
            " .... "],
    '/' => [" ...# ",
            " ..#. ",
            " .#.. ",
            " #... ",
            " #... "],
    '(' => [" .#. ",
            " #.. ",
            " #.. ",
            " #.. ",
            " .#. "],
    ')' => [" .#. ",
            " ..# ",
            " ..# ",
            " ..# ",
            " .#. "],
    '#' => [" .#.#. ",
            " ##### ",
            " .#.#. ",
            " ##### ",
            " .#.#. "],
    '@' => [" .###. ",
            " #.##. ",
            " #.##. ",
            " #.... ",
            " .###. "],
    '*' => [" ..... ",
            " #.#.# ",
            " .###. ",
            " #.#.# ",
            " ..... "],
    '&' => [" .##.. ",
            " #..#. ",
            " .##.# ",
            " #..#. ",
            " .###. "],
    '$' => [" .#### ",
            " #.#.. ",
            " .###. ",
            " ..#.# ",
            " ####. "],
    '%' => [" #...# ",
            " ...#. ",
            " ..#.. ",
            " .#... ",
            " #...# "],
    '^' => [" .#. ",
            " #.# ",
            " ... ",
            " ... ",
            " ... "],
    '~' => [" ..... ",
            " ..... ",
            " #..#. ",
            " .##.. ",
            " ..... "],
    '<' => [" ..# ",
            " .#. ",
            " #.. ",
            " .#. ",
            " ..# "],
    '>' => [" #.. ",
            " .#. ",
            " ..# ",
            " .#. ",
            " #.. "],
    '[' => [" ##. ",
            " #.. ",
            " #.. ",
            " #.. ",
            " ##. "],
    ']' => [" .## ",
            " ..# ",
            " ..# ",
            " ..# ",
            " .## "],
    '"' => [" #.# ",
            " #.# ",
            " ... ",
            " ... ",
            " ... "],
    "'" => [" #. ",
            " #. ",
            " .. ",
            " .. ",
            " .. "],
    ' ' => ["   ",
            "   ",
            "   ",
            "   ",
            "   "],
  );

  return %letters;
}

# ============================================================================
# FONT: MINIWI (3-4 row compact, Unicode quadrant block characters)
# ============================================================================
# The miniwi font uses Unicode block element characters for ultra-compact
# pixel-style rendering. Each cell IS the character (no marker translation).
# Characters are 2-4 columns wide and 3-4 rows tall.
#
# Unicode quadrant block characters used:
#   U+2580 ▀ upper half    U+2584 ▄ lower half
#   U+2588 █ full block    U+258C ▌ left half     U+2590 ▐ right half
#   U+2596 ▖ quad LL       U+2597 ▗ quad LR       U+2598 ▘ quad UL
#   U+2599 ▙ UL+LL+LR     U+259A ▚ UL+LR (diag\) U+259B ▛ UL+UR+LL
#   U+259C ▜ UL+UR+LR     U+259D ▝ quad UR        U+259E ▞ UR+LL (diag/)
#   U+259F ▟ UR+LL+LR
#
# NOTE: This font requires Unicode support. Not compatible with PETSCII/C64 mode.
# All glyphs are stored as 4 rows. Characters without ascenders/descenders
# have empty strings for rows 1/4 respectively.

sub _bt_font_miniwi {
  my %letters = (
    # --- Uppercase (3 rows, no descenders except Q) ---
    'A' => ["\x{2584}\x{2596}",
            "\x{258C}\x{258C}",
            "\x{259B}\x{258C}",
            "  "],
    'B' => ["\x{2584} ",
            "\x{2599}\x{2598}",
            "\x{2599}\x{2598}",
            "  "],
    'C' => ["\x{2584}\x{2596}",
            "\x{258C} ",
            "\x{2599}\x{2596}",
            "  "],
    'D' => ["\x{2584} ",
            "\x{258C}\x{258C}",
            "\x{2599}\x{2598}",
            "  "],
    'E' => ["\x{2584}\x{2596}",
            "\x{2599}\x{2596}",
            "\x{2599}\x{2596}",
            "  "],
    'F' => ["\x{2584}\x{2596}",
            "\x{2599}\x{2596}",
            "\x{258C} ",
            "  "],
    'G' => ["\x{2584}\x{2596}",
            "\x{258C} ",
            "\x{2599}\x{258C}",
            "  "],
    'H' => ["\x{2596}\x{2596}",
            "\x{2599}\x{258C}",
            "\x{258C}\x{258C}",
            "  "],
    'I' => ["\x{2584}\x{2596}",
            "\x{2590} ",
            "\x{259F}\x{2596}",
            "  "],
    'J' => [" \x{2596}",
            " \x{258C}",
            "\x{2599}\x{258C}",
            "  "],
    'K' => ["\x{2596}\x{2596}",
            "\x{2599}\x{2598}",
            "\x{258C}\x{258C}",
            "  "],
    'L' => ["\x{2596} ",
            "\x{258C} ",
            "\x{2599}\x{2596}",
            "  "],
    'M' => ["\x{2596}  \x{2596}",
            "\x{259B}\x{2596}\x{259E}\x{258C}",
            "\x{258C}\x{259D} \x{258C}",
            "    "],
    'N' => ["\x{2596} \x{2596}",
            "\x{259B}\x{2596}\x{258C}",
            "\x{258C}\x{259D}\x{258C}",
            "   "],
    'O' => ["\x{2584}\x{2596}",
            "\x{258C}\x{258C}",
            "\x{2599}\x{258C}",
            "  "],
    'P' => ["\x{2584}\x{2596}",
            "\x{2599}\x{258C}",
            "\x{258C} ",
            "  "],
    'Q' => ["\x{2584}\x{2596}",
            "\x{258C}\x{258C}",
            "\x{2588}\x{258C}",
            " \x{2598}"],
    'R' => ["\x{2584}\x{2596}",
            "\x{2599}\x{2598}",
            "\x{258C}\x{258C}",
            "  "],
    'S' => ["\x{2584}\x{2596}",
            "\x{259A} ",
            "\x{2584}\x{258C}",
            "  "],
    'T' => ["\x{2584}\x{2596}",
            "\x{2590} ",
            "\x{2590} ",
            "  "],
    'U' => ["\x{2596}\x{2596}",
            "\x{258C}\x{258C}",
            "\x{2599}\x{258C}",
            "  "],
    'V' => ["\x{2596}\x{2596}",
            "\x{258C}\x{258C}",
            "\x{259A}\x{2598}",
            "  "],
    'W' => ["\x{2596}  \x{2596}",
            "\x{258C}\x{259E}\x{2596}\x{258C}",
            "\x{259B} \x{259D}\x{258C}",
            "    "],
    'X' => ["\x{2596}\x{2596}",
            "\x{259A}\x{2598}",
            "\x{258C}\x{258C}",
            "  "],
    'Y' => ["\x{2596}\x{2596}",
            "\x{258C}\x{258C}",
            "\x{2590} ",
            "  "],
    'Z' => ["\x{2584}\x{2596}",
            "\x{2597}\x{2598}",
            "\x{2599}\x{2596}",
            "  "],

    # --- Lowercase (2-4 rows with ascenders and descenders) ---
    'a' => ["  ",
            "\x{2580}\x{258C}",
            "\x{2588}\x{258C}",
            "  "],
    'b' => ["\x{258C} ",
            "\x{259B}\x{258C}",
            "\x{2599}\x{258C}",
            "  "],
    'c' => ["  ",
            "\x{259B}\x{2598}",
            "\x{2599}\x{2596}",
            "  "],
    'd' => [" \x{258C}",
            "\x{259B}\x{258C}",
            "\x{2599}\x{258C}",
            "  "],
    'e' => ["  ",
            "\x{2588}\x{258C}",
            "\x{2599}\x{2596}",
            "  "],
    'f' => ["\x{2590}\x{2598}",
            "\x{259C}\x{2598}",
            "\x{2590} ",
            "  "],
    'g' => ["  ",
            "\x{259B}\x{258C}",
            "\x{2599}\x{258C}",
            "\x{2584}\x{258C}"],
    'h' => ["\x{258C} ",
            "\x{259B}\x{258C}",
            "\x{258C}\x{258C}",
            "  "],
    'i' => ["\x{2584}\x{2596}",
            "\x{2590} ",
            "\x{259F}\x{2596}",
            "  "],
    'j' => [" \x{2598}",
            " \x{258C}",
            " \x{258C}",
            "\x{2599}\x{258C}"],
    'k' => ["\x{258C} ",
            "\x{2599}\x{2598}",
            "\x{259B}\x{2596}",
            "  "],
    'l' => ["\x{259C} ",
            "\x{2590} ",
            "\x{2590}\x{2596}",
            "  "],
    'm' => ["   ",
            "\x{259B}\x{259B}\x{258C}",
            "\x{258C}\x{258C}\x{258C}",
            "   "],
    'n' => ["  ",
            "\x{259B}\x{258C}",
            "\x{258C}\x{258C}",
            "  "],
    'o' => ["  ",
            "\x{259B}\x{258C}",
            "\x{2599}\x{258C}",
            "  "],
    'p' => ["  ",
            "\x{259B}\x{258C}",
            "\x{2599}\x{258C}",
            "\x{258C} "],
    'q' => ["  ",
            "\x{259B}\x{258C}",
            "\x{2599}\x{258C}",
            " \x{258C}"],
    'r' => ["  ",
            "\x{259B}\x{2598}",
            "\x{258C} ",
            "  "],
    's' => ["  ",
            "\x{259B}\x{2598}",
            "\x{2584}\x{258C}",
            "  "],
    't' => ["\x{2597} ",
            "\x{259C}\x{2598}",
            "\x{2590}\x{2596}",
            "  "],
    'u' => ["  ",
            "\x{258C}\x{258C}",
            "\x{2599}\x{258C}",
            "  "],
    'v' => ["  ",
            "\x{258C}\x{258C}",
            "\x{259A}\x{2598}",
            "  "],
    'w' => ["   ",
            "\x{258C}\x{258C}\x{258C}",
            "\x{259A}\x{259A}\x{2598}",
            "   "],
    'x' => ["  ",
            "\x{259A}\x{2598}",
            "\x{259E}\x{2596}",
            "  "],
    'y' => ["  ",
            "\x{258C}\x{258C}",
            "\x{2599}\x{258C}",
            "\x{2584}\x{258C}"],
    'z' => ["  ",
            "\x{2580}\x{258C}",
            "\x{2599}\x{2596}",
            "  "],

    # --- Numbers ---
    '0' => ["\x{2584}\x{2596}",
            "\x{258C}\x{258C}",
            "\x{2599}\x{258C}",
            "  "],
    '1' => ["\x{2584} ",
            "\x{258C} ",
            "\x{258C} ",
            "  "],
    '2' => ["\x{2584}\x{2596}",
            " \x{258C}",
            "\x{2599}\x{2596}",
            "  "],
    '3' => ["\x{2584}\x{2596}",
            "\x{2580}\x{258C}",
            "\x{2584}\x{258C}",
            "  "],
    '4' => ["\x{2596}\x{2596}",
            "\x{2599}\x{258C}",
            " \x{258C}",
            "  "],
    '5' => ["\x{2584}\x{2596}",
            "\x{259B}\x{2598}",
            "\x{2584}\x{258C}",
            "  "],
    '6' => ["\x{2584}\x{2596}",
            "\x{259B}\x{2598}",
            "\x{2599}\x{258C}",
            "  "],
    '7' => ["\x{2584}\x{2596}",
            " \x{258C}",
            " \x{258C}",
            "  "],
    '8' => ["\x{2584}\x{2596}",
            "\x{259A}\x{258C}",
            "\x{2599}\x{258C}",
            "  "],
    '9' => ["\x{2584}\x{2596}",
            "\x{2599}\x{258C}",
            "\x{2584}\x{258C}",
            "  "],

    # --- Punctuation ---
    '!' => ["\x{258C}",
            "\x{258C}",
            "\x{2584}",
            " "],
    '.' => [" ",
            " ",
            "\x{2584}",
            " "],
    ',' => [" ",
            " ",
            "\x{2596}",
            "\x{258C}"],
    ':' => [" ",
            "\x{258C}",
            "\x{2584}",
            " "],
    '-' => ["  ",
            "\x{2580}\x{2598}",
            "  ",
            "  "],
    ' ' => [" ",
            " ",
            " ",
            " "],
  );

  return %letters;
}

# ============================================================================
# FONT: BLOODY (10-row elaborate, Unicode shade/block characters)
# ============================================================================
# The bloody font uses Unicode block elements and shade characters for
# an elaborate dripping/horror style. 10 rows tall, A-Z only.
# Lowercase input is converted to uppercase automatically.
#
# Characters used: ▄▀█▓▒░▐▌ and standard ASCII ▒ shading
#
# NOTE: This font requires Unicode support. Not compatible with PETSCII/C64 mode.

sub _bt_font_bloody {
  my %letters = (
    'A' => [" \x{2584}\x{2584}\x{2584}      ",
            "\x{2592}\x{2588}\x{2588}\x{2588}\x{2588}\x{2584}    ",
            "\x{2592}\x{2588}\x{2588}  \x{2580}\x{2588}\x{2584}  ",
            "\x{2591}\x{2588}\x{2588}\x{2584}\x{2584}\x{2584}\x{2584}\x{2588}\x{2588} ",
            " \x{2593}\x{2588}   \x{2593}\x{2588}\x{2588}\x{2592}",
            " \x{2592}\x{2592}   \x{2593}\x{2592}\x{2588}\x{2591}",
            "  \x{2592}   \x{2592}\x{2592} \x{2591}",
            "  \x{2591}   \x{2592}   ",
            "      \x{2591}  \x{2591}",
            "          "],
    'B' => [" \x{2584}\x{2584}\x{2584}\x{2584}   ",
            "\x{2593}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588}\x{2584} ",
            "\x{2592}\x{2588}\x{2588}\x{2592} \x{2584}\x{2588}\x{2588}",
            "\x{2592}\x{2588}\x{2588}\x{2591}\x{2588}\x{2580}  ",
            "\x{2591}\x{2593}\x{2588}  \x{2580}\x{2588}\x{2593}",
            "\x{2591}\x{2592}\x{2593}\x{2588}\x{2588}\x{2588}\x{2580}\x{2592}",
            "\x{2592}\x{2591}\x{2592}   \x{2591} ",
            " \x{2591}    \x{2591} ",
            " \x{2591}      ",
            "      \x{2591} "],
    'C' => [" \x{2584}\x{2588}\x{2588}\x{2588}\x{2588}\x{2584}  ",
            "\x{2592}\x{2588}\x{2588}\x{2580} \x{2580}\x{2588}  ",
            "\x{2592}\x{2593}\x{2588}    \x{2584} ",
            "\x{2592}\x{2593}\x{2593}\x{2584} \x{2584}\x{2588}\x{2588}\x{2592}",
            "\x{2592} \x{2593}\x{2588}\x{2588}\x{2588}\x{2580} \x{2591}",
            "\x{2591} \x{2591}\x{2592} \x{2592}  \x{2591}",
            "  \x{2591}  \x{2592}   ",
            "\x{2591}        ",
            "\x{2591} \x{2591}      ",
            "\x{2591}        "],
    'D' => ["\x{2593}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588}\x{2584} ",
            "\x{2592}\x{2588}\x{2588}\x{2580} \x{2588}\x{2588}\x{258C}",
            "\x{2591}\x{2588}\x{2588}   \x{2588}\x{258C}",
            "\x{2591}\x{2593}\x{2588}\x{2584}   \x{258C}",
            "\x{2591}\x{2592}\x{2588}\x{2588}\x{2588}\x{2588}\x{2593} ",
            " \x{2592}\x{2592}\x{2593}  \x{2592} ",
            " \x{2591} \x{2592}  \x{2592} ",
            " \x{2591} \x{2591}  \x{2591} ",
            "   \x{2591}    ",
            " \x{2591}      "],
    'E' => ["\x{2593}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588} ",
            "\x{2593}\x{2588}   \x{2580} ",
            "\x{2592}\x{2588}\x{2588}\x{2588}   ",
            "\x{2592}\x{2593}\x{2588}  \x{2584} ",
            "\x{2591}\x{2592}\x{2588}\x{2588}\x{2588}\x{2588}\x{2592}",
            "\x{2591}\x{2591} \x{2592}\x{2591} \x{2591}",
            " \x{2591} \x{2591}  \x{2591}",
            "   \x{2591}   ",
            "   \x{2591}  \x{2591}",
            "       "],
    'F' => ["  \x{2588}\x{2588}\x{2588}\x{2588}\x{2588}\x{2592}",
            "\x{2593}\x{2588}\x{2588}   \x{2592} ",
            "\x{2592}\x{2588}\x{2588}\x{2588}\x{2588} \x{2591} ",
            "\x{2591}\x{2593}\x{2588}\x{2592}  \x{2591} ",
            "\x{2591}\x{2592}\x{2588}\x{2591}    ",
            " \x{2592} \x{2591}    ",
            " \x{2591}      ",
            " \x{2591} \x{2591}    ",
            "        ",
            "        "],
    'G' => ["  \x{2584}\x{2588}\x{2588}\x{2588}\x{2588} ",
            " \x{2588}\x{2588}\x{2592} \x{2580}\x{2588}\x{2592}",
            "\x{2592}\x{2588}\x{2588}\x{2591}\x{2584}\x{2584}\x{2584}\x{2591}",
            "\x{2591}\x{2593}\x{2588}  \x{2588}\x{2588}\x{2593}",
            "\x{2591}\x{2592}\x{2593}\x{2588}\x{2588}\x{2588}\x{2580}\x{2592}",
            " \x{2591}\x{2592}   \x{2592} ",
            "  \x{2591}   \x{2591} ",
            "\x{2591} \x{2591}   \x{2591} ",
            "      \x{2591} ",
            "        "],
    'H' => [" \x{2588}\x{2588}\x{2591} \x{2588}\x{2588} ",
            "\x{2593}\x{2588}\x{2588}\x{2591} \x{2588}\x{2588}\x{2592}",
            "\x{2592}\x{2588}\x{2588}\x{2580}\x{2580}\x{2588}\x{2588}\x{2591}",
            "\x{2591}\x{2593}\x{2588} \x{2591}\x{2588}\x{2588} ",
            "\x{2591}\x{2593}\x{2588}\x{2592}\x{2591}\x{2588}\x{2588}\x{2593}",
            " \x{2592} \x{2591}\x{2591}\x{2592}\x{2591}\x{2592}",
            " \x{2592} \x{2591}\x{2592}\x{2591} \x{2591}",
            " \x{2591}  \x{2591}\x{2591} \x{2591}",
            " \x{2591}  \x{2591}  \x{2591}",
            "        "],
    'I' => [" \x{2588}\x{2588}\x{2593}",
            "\x{2593}\x{2588}\x{2588}\x{2592}",
            "\x{2592}\x{2588}\x{2588}\x{2592}",
            "\x{2591}\x{2588}\x{2588}\x{2591}",
            "\x{2591}\x{2588}\x{2588}\x{2591}",
            "\x{2591}\x{2593}  ",
            " \x{2592} \x{2591}",
            " \x{2592} \x{2591}",
            " \x{2591}  ",
            "    "],
    'J' => [" \x{2584}\x{2584}\x{2584}\x{2588}\x{2588}\x{2580}\x{2580}\x{2580}",
            "   \x{2592}\x{2588}\x{2588}   ",
            "   \x{2591}\x{2588}\x{2588}   ",
            "\x{2593}\x{2588}\x{2588}\x{2584}\x{2588}\x{2588}\x{2593}  ",
            " \x{2593}\x{2588}\x{2588}\x{2588}\x{2592}   ",
            " \x{2592}\x{2593}\x{2592}\x{2592}\x{2591}   ",
            " \x{2592} \x{2591}\x{2592}\x{2591}   ",
            " \x{2591} \x{2591} \x{2591}   ",
            " \x{2591}   \x{2591}   ",
            "         "],
    'K' => [" \x{2588}\x{2588} \x{2584}\x{2588}\x{2580}",
            " \x{2588}\x{2588}\x{2584}\x{2588}\x{2592} ",
            "\x{2593}\x{2588}\x{2588}\x{2588}\x{2584}\x{2591} ",
            "\x{2593}\x{2588}\x{2588} \x{2588}\x{2584} ",
            "\x{2592}\x{2588}\x{2588}\x{2592} \x{2588}\x{2584}",
            "\x{2592} \x{2592}\x{2592} \x{2593}\x{2592}",
            "\x{2591} \x{2591}\x{2592} \x{2592}\x{2591}",
            "\x{2591} \x{2591}\x{2591} \x{2591} ",
            "\x{2591}  \x{2591}   ",
            "       "],
    'L' => [" \x{2588}\x{2588}\x{2593}    ",
            "\x{2593}\x{2588}\x{2588}\x{2592}    ",
            "\x{2592}\x{2588}\x{2588}\x{2591}    ",
            "\x{2592}\x{2588}\x{2588}\x{2591}    ",
            "\x{2591}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588}\x{2592}",
            "\x{2591} \x{2592}\x{2591}\x{2593}  \x{2591}",
            "\x{2591} \x{2591} \x{2592}  \x{2591}",
            "  \x{2591} \x{2591}   ",
            "    \x{2591}  \x{2591}",
            "        "],
    'M' => [" \x{2588}\x{2588}\x{2588}\x{2584} \x{2584}\x{2588}\x{2588}\x{2588}\x{2593}",
            "\x{2593}\x{2588}\x{2588}\x{2592}\x{2580}\x{2588}\x{2580} \x{2588}\x{2588}\x{2592}",
            "\x{2593}\x{2588}\x{2588}    \x{2593}\x{2588}\x{2588}\x{2591}",
            "\x{2592}\x{2588}\x{2588}    \x{2592}\x{2588}\x{2588} ",
            "\x{2592}\x{2588}\x{2588}\x{2592}   \x{2591}\x{2588}\x{2588}\x{2592}",
            "\x{2591} \x{2592}\x{2591}   \x{2591}  \x{2591}",
            "\x{2591}  \x{2591}      \x{2591}",
            "\x{2591}      \x{2591}   ",
            "       \x{2591}   ",
            "           "],
    'N' => [" \x{2588}\x{2588}\x{2588}\x{2584}    \x{2588} ",
            " \x{2588}\x{2588} \x{2580}\x{2588}   \x{2588} ",
            "\x{2593}\x{2588}\x{2588}  \x{2580}\x{2588} \x{2588}\x{2588}\x{2592}",
            "\x{2593}\x{2588}\x{2588}\x{2592}  \x{2590}\x{258C}\x{2588}\x{2588}\x{2592}",
            "\x{2592}\x{2588}\x{2588}\x{2591}   \x{2593}\x{2588}\x{2588}\x{2591}",
            "\x{2591} \x{2592}\x{2591}   \x{2592} \x{2592} ",
            "\x{2591} \x{2591}\x{2591}   \x{2591} \x{2592}\x{2591}",
            "   \x{2591}   \x{2591} \x{2591} ",
            "         \x{2591} ",
            "           "],
    'O' => [" \x{2592}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588}  ",
            "\x{2592}\x{2588}\x{2588}\x{2592}  \x{2588}\x{2588}\x{2592}",
            "\x{2592}\x{2588}\x{2588}\x{2591}  \x{2588}\x{2588}\x{2592}",
            "\x{2592}\x{2588}\x{2588}   \x{2588}\x{2588}\x{2591}",
            "\x{2591} \x{2588}\x{2588}\x{2588}\x{2588}\x{2593}\x{2592}\x{2591}",
            "\x{2591} \x{2592}\x{2591}\x{2592}\x{2591}\x{2592}\x{2591} ",
            "  \x{2591} \x{2592} \x{2592}\x{2591} ",
            "\x{2591} \x{2591} \x{2591} \x{2592}  ",
            "    \x{2591} \x{2591}  ",
            "         "],
    'P' => [" \x{2588}\x{2588}\x{2593}\x{2588}\x{2588}\x{2588}  ",
            "\x{2593}\x{2588}\x{2588}\x{2591}  \x{2588}\x{2588}\x{2592}",
            "\x{2593}\x{2588}\x{2588}\x{2591} \x{2588}\x{2588}\x{2593}\x{2592}",
            "\x{2592}\x{2588}\x{2588}\x{2584}\x{2588}\x{2593}\x{2592} \x{2592}",
            "\x{2592}\x{2588}\x{2588}\x{2592} \x{2591}  \x{2591}",
            "\x{2592}\x{2593}\x{2592}\x{2591} \x{2591}  \x{2591}",
            "\x{2591}\x{2592} \x{2591}     ",
            "\x{2591}\x{2591}       ",
            "         ",
            "         "],
    'Q' => ["  \x{2588}\x{2588}\x{2588}\x{2588}\x{2588}  ",
            "\x{2592}\x{2588}\x{2588}\x{2593}  \x{2588}\x{2588}\x{2592}",
            "\x{2592}\x{2588}\x{2588}\x{2592}  \x{2588}\x{2588}\x{2591}",
            "\x{2591}\x{2588}\x{2588}  \x{2588}\x{2580} \x{2591}",
            "\x{2591}\x{2592}\x{2588}\x{2588}\x{2588}\x{2592}\x{2588}\x{2584} ",
            "\x{2591}\x{2591} \x{2592}\x{2592}\x{2591} \x{2592} ",
            " \x{2591} \x{2592}\x{2591}  \x{2591} ",
            "   \x{2591}   \x{2591} ",
            "    \x{2591}    ",
            "         "],
    'R' => [" \x{2588}\x{2588}\x{2580}\x{2588}\x{2588}\x{2588}  ",
            "\x{2593}\x{2588}\x{2588} \x{2592} \x{2588}\x{2588}\x{2592}",
            "\x{2593}\x{2588}\x{2588} \x{2591}\x{2584}\x{2588} \x{2592}",
            "\x{2592}\x{2588}\x{2588}\x{2580}\x{2580}\x{2588}\x{2584}  ",
            "\x{2591}\x{2588}\x{2588}\x{2593} \x{2592}\x{2588}\x{2588}\x{2592}",
            "\x{2591} \x{2592}\x{2593} \x{2591}\x{2592}\x{2593}\x{2591}",
            "  \x{2591}\x{2592} \x{2591} \x{2592}\x{2591}",
            "  \x{2591}\x{2591}   \x{2591} ",
            "   \x{2591}     ",
            "         "],
    'S' => ["  \x{2588}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588} ",
            "\x{2592}\x{2588}\x{2588}    \x{2592} ",
            "\x{2591} \x{2593}\x{2588}\x{2588}\x{2584}   ",
            "  \x{2592}   \x{2588}\x{2588}\x{2592}",
            "\x{2592}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588}\x{2592}\x{2592}",
            "\x{2592} \x{2592}\x{2593}\x{2592} \x{2592} \x{2591}",
            "\x{2591} \x{2591}\x{2592}  \x{2591} \x{2591}",
            "\x{2591}  \x{2591}  \x{2591}  ",
            "      \x{2591}  ",
            "         "],
    'T' => ["\x{2584}\x{2584}\x{2584}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588}\x{2593}",
            "\x{2593}  \x{2588}\x{2588}\x{2592} \x{2593}\x{2592}",
            "\x{2592} \x{2593}\x{2588}\x{2588}\x{2591} \x{2592}\x{2591}",
            "\x{2591} \x{2593}\x{2588}\x{2588}\x{2593} \x{2591} ",
            "  \x{2592}\x{2588}\x{2588}\x{2592} \x{2591} ",
            "  \x{2592} \x{2591}\x{2591}   ",
            "    \x{2591}    ",
            "  \x{2591}      ",
            "         ",
            "         "],
    'U' => [" \x{2588}    \x{2588}\x{2588} ",
            " \x{2588}\x{2588}  \x{2593}\x{2588}\x{2588}\x{2592}",
            "\x{2593}\x{2588}\x{2588}  \x{2592}\x{2588}\x{2588}\x{2591}",
            "\x{2593}\x{2593}\x{2588}  \x{2591}\x{2588}\x{2588}\x{2591}",
            "\x{2592}\x{2592}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588}\x{2593} ",
            "\x{2591}\x{2592}\x{2593}\x{2592} \x{2592} \x{2592} ",
            "\x{2591}\x{2591}\x{2592}\x{2591} \x{2591} \x{2591} ",
            " \x{2591}\x{2591}\x{2591} \x{2591} \x{2591} ",
            "   \x{2591}     ",
            "         "],
    'V' => [" \x{2588}\x{2588}\x{2592}   \x{2588}\x{2593}",
            "\x{2593}\x{2588}\x{2588}\x{2591}   \x{2588}\x{2592}",
            " \x{2593}\x{2588}\x{2588}  \x{2588}\x{2592}\x{2591}",
            "  \x{2592}\x{2588}\x{2588} \x{2588}\x{2591}\x{2591}",
            "   \x{2592}\x{2580}\x{2588}\x{2591}  ",
            "   \x{2591} \x{2590}\x{2591}  ",
            "   \x{2591} \x{2591}\x{2591}  ",
            "     \x{2591}\x{2591}  ",
            "      \x{2591}  ",
            "     \x{2591}   "],
    'W' => [" \x{2588}     \x{2588}\x{2591}",
            "\x{2593}\x{2588}\x{2591} \x{2588} \x{2591}\x{2588}\x{2591}",
            "\x{2592}\x{2588}\x{2591} \x{2588} \x{2591}\x{2588} ",
            "\x{2591}\x{2588}\x{2591} \x{2588} \x{2591}\x{2588} ",
            "\x{2591}\x{2591}\x{2588}\x{2588}\x{2592}\x{2588}\x{2588}\x{2593} ",
            "\x{2591} \x{2593}\x{2591}\x{2592} \x{2592}  ",
            "  \x{2592} \x{2591} \x{2591}  ",
            "  \x{2591}   \x{2591}  ",
            "    \x{2591}    ",
            "         "],
    'X' => ["\x{2592}\x{2588}\x{2588}   \x{2588}\x{2588}\x{2592}",
            "\x{2592}\x{2592} \x{2588} \x{2588} \x{2592}\x{2591}",
            "\x{2591}\x{2591}  \x{2588}   \x{2591}",
            " \x{2591} \x{2588} \x{2588} \x{2592} ",
            "\x{2592}\x{2588}\x{2588}\x{2592} \x{2592}\x{2588}\x{2588}\x{2592}",
            "\x{2592}\x{2592} \x{2591} \x{2591}\x{2593} \x{2591}",
            "\x{2591}\x{2591}   \x{2591}\x{2592} \x{2591}",
            " \x{2591}    \x{2591}  ",
            " \x{2591}    \x{2591}  ",
            "         "],
    'Y' => ["\x{2593}\x{2588}\x{2588}   \x{2588}\x{2588}\x{2593}",
            " \x{2592}\x{2588}\x{2588}  \x{2588}\x{2588}\x{2592}",
            "  \x{2592}\x{2588}\x{2588} \x{2588}\x{2588}\x{2591}",
            "  \x{2591} \x{2590}\x{2588}\x{2588}\x{2593}\x{2591}",
            "  \x{2591} \x{2588}\x{2588}\x{2592}\x{2593}\x{2591}",
            "   \x{2588}\x{2588}\x{2592}\x{2592}\x{2592} ",
            " \x{2593}\x{2588}\x{2588} \x{2591}\x{2592}\x{2591} ",
            " \x{2592} \x{2592} \x{2591}\x{2591}  ",
            " \x{2591} \x{2591}     ",
            " \x{2591} \x{2591}     "],
    'Z' => ["\x{2592}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588}\x{2592}",
            "\x{2592} \x{2592} \x{2592} \x{2584}\x{2580}\x{2591}",
            "\x{2591} \x{2592} \x{2584}\x{2580}\x{2592}\x{2591} ",
            "  \x{2584}\x{2580}\x{2592}   \x{2591}",
            "\x{2592}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588}\x{2588}\x{2592}",
            "\x{2591}\x{2592}\x{2592} \x{2593}\x{2591}\x{2592}\x{2591}\x{2592}",
            "\x{2591}\x{2591}\x{2592} \x{2592} \x{2591} \x{2592}",
            "\x{2591} \x{2591} \x{2591} \x{2591} \x{2591}",
            "  \x{2591} \x{2591}    ",
            "\x{2591}        "],
    ' ' => ["    ",
            "    ",
            "    ",
            "    ",
            "    ",
            "    ",
            "    ",
            "    ",
            "    ",
            "    "],
    '-' => ["         ",
            "         ",
            "         ",
            "         ",
            "\x{2591}\x{2592}\x{2593}\x{2588}\x{2588}\x{2593}\x{2592}\x{2591} ",
            "         ",
            "         ",
            "         ",
            "         ",
            "         "],
    '!' => [" \x{2588}\x{2588}\x{2593}",
            "\x{2593}\x{2588}\x{2588}\x{2592}",
            "\x{2592}\x{2588}\x{2588}\x{2592}",
            "\x{2591}\x{2588}\x{2588}\x{2591}",
            " \x{2593}\x{2591} ",
            " \x{2592}\x{2592} ",
            " \x{2591}\x{2592} ",
            " \x{2591}\x{2591} ",
            "    ",
            "    "],
  );

  return %letters;
}

# ============================================================================
# STYLE RENDERERS (for block font)
# ============================================================================
# Each style translates the '#' and '.' markers into actual characters.

sub _bt_render_cell {
  my ($cell, $style) = @_;
  $style //= 'block';

  if ($cell eq '#') {
    if ($style eq 'block') {
      return _bt_char('full');
    } elsif ($style eq 'shade') {
      return _bt_char('dark');
    } elsif ($style eq 'light') {
      return _bt_char('medium');
    } elsif ($style eq 'dots') {
      return _bt_char('light');
    } elsif ($style eq 'half') {
      return _bt_char('upper');
    } elsif ($style eq 'hash') {
      return '#';
    } elsif ($style eq 'ascii') {
      return '#';
    } elsif ($style eq 'double') {
      return boxchar('dhorizontal');
    } elsif ($style eq 'line') {
      return boxchar('horizontal');
    }
    return _bt_char('full');
  } elsif ($cell eq '.') {
    return ' ';
  }

  # Pass through spaces and unknown
  return $cell;
}

# ============================================================================
# CORE RENDERING ENGINE
# ============================================================================

sub bigtext {
  my ($text, %opts) = @_;
  my $font_name = $opts{'font'}   // 'block';
  my $style     = $opts{'style'}  // 'block';
  my $color     = $opts{'color'}  // '';
  my $center    = $opts{'center'} // 0;
  my $spacing   = $opts{'spacing'} // 0;
  my $width     = $config{'terminal_width'} || 80;

  # Load the appropriate font
  my %font;
  my $num_rows;

  if ($font_name eq 'miniwi') {
    %font = _bt_font_miniwi();
    $num_rows = 4;
    # Miniwi supports mixed case
    # Don't uppercase - the font has distinct upper and lowercase
  } elsif ($font_name eq 'bloody') {
    %font = _bt_font_bloody();
    $num_rows = 10;
    $text = uc($text);  # Bloody font is uppercase only
  } elsif ($font_name eq 'dosrebel') {
    %font = _bt_font_dosrebel();
    $num_rows = 8;
    $text = uc($text);  # DOS Rebel font is uppercase only
  } elsif ($font_name eq 'doom') {
    %font = _bt_font_doom();
    $num_rows = 8;
    # Doom font supports mixed case - don't uppercase
  } else {
    %font = _bt_font_block();
    $num_rows = 5;
    $text = uc($text);  # Block font is uppercase only
  }

  # Build row strings by concatenating each character's row
  my @rows = ('') x $num_rows;

  for my $i (0 .. length($text) - 1) {
    my $ch = substr($text, $i, 1);

    # Skip characters we don't have a glyph for
    unless (exists $font{$ch}) {
      # For miniwi, try uppercase fallback for missing lowercase
      if ($font_name eq 'miniwi' && $ch ge 'a' && $ch le 'z') {
        $ch = uc($ch);
      } elsif ($font_name eq 'miniwi' && $ch ge 'A' && $ch le 'Z') {
        $ch = lc($ch);
      }
      # Still missing? Use space
      unless (exists $font{$ch}) {
        $ch = ' ';
      }
    }

    my $glyph = $font{$ch};
    for my $row (0 .. $num_rows - 1) {
      my $rowdata = $glyph->[$row] // '';

      if ($font_name eq 'miniwi' || $font_name eq 'bloody' || $font_name eq 'dosrebel' || $font_name eq 'doom') {
        # Unicode/ASCII fonts: characters are already the final glyphs
        $rows[$row] .= $rowdata;
      } else {
        # Block font: render each cell through the style translator
        my $rendered = '';
        for my $c (0 .. length($rowdata) - 1) {
          $rendered .= _bt_render_cell(substr($rowdata, $c, 1), $style);
        }
        $rows[$row] .= $rendered;
      }

      # Add inter-letter spacing (except after last char)
      if ($spacing > 0 && $i < length($text) - 1) {
        $rows[$row] .= ' ' x $spacing;
      }
    }
  }

  # Center each row if requested
  if ($center) {
    for my $row (0 .. $num_rows - 1) {
      my $visible = $rows[$row];
      $visible =~ s/\e\[[0-9;]*m//g;  # Strip ANSI for width calc
      my $len = length($visible);
      if ($len < $width) {
        my $pad = int(($width - $len) / 2);
        $rows[$row] = (' ' x $pad) . $rows[$row];
      }
    }
  }

  # Apply color if specified
  if ($color ne '') {
    for my $row (0 .. $num_rows - 1) {
      $rows[$row] = $color . $rows[$row] . $RST;
    }
  }

  return @rows;
}

# ============================================================================
# CONVENIENCE FUNCTIONS
# ============================================================================

# Write big text directly via writeline()
sub bigtext_write {
  my ($text, %opts) = @_;
  my @lines = bigtext($text, %opts);
  for my $line (@lines) {
    main::writeline($line, 1);
  }
  return scalar @lines;
}

# Return big text as a single string (newline separated)
sub bigtext_string {
  my ($text, %opts) = @_;
  my @lines = bigtext($text, %opts);
  return join("\n", @lines) . "\n";
}

# Get the rendered width (in columns) of a big text string
sub bigtext_width {
  my ($text, %opts) = @_;
  my @lines = bigtext($text, %opts);
  return 0 unless @lines;
  # Return length of first row (they should all be equal)
  # Strip ANSI codes to get visible width
  my $line = $lines[0];
  $line =~ s/\e\[[0-9;]*m//g;
  return length($line);
}

# Check if text will fit within terminal width
sub bigtext_fits {
  my ($text, %opts) = @_;
  my $width = $config{'terminal_width'} || 80;
  return bigtext_width($text, %opts) <= $width;
}

# List available fonts
sub bigtext_fonts {
  return ('block', 'miniwi', 'bloody', 'dosrebel', 'doom');
}

# List available styles (for block font)
sub bigtext_styles {
  return ('block', 'shade', 'light', 'dots', 'half', 'hash', 'ascii', 'double', 'line');
}

# List available characters for a given font
sub bigtext_chars {
  my (%opts) = @_;
  my $font_name = $opts{'font'} // 'block';
  my %font;
  if ($font_name eq 'miniwi') {
    %font = _bt_font_miniwi();
  } elsif ($font_name eq 'bloody') {
    %font = _bt_font_bloody();
  } elsif ($font_name eq 'dosrebel') {
    %font = _bt_font_dosrebel();
  } elsif ($font_name eq 'doom') {
    %font = _bt_font_doom();
  } else {
    %font = _bt_font_block();
  }
  return sort keys %font;
}

sub _bt_font_dosrebel {
  my %font;

  # DOS Rebel - 8 rows per char, uppercase only
  # Based on the "DOS Rebel" / "ANSI Regular" figlet font

  $font{'A'} = [
    '   █████████  ',
    '  ███░░░░░███ ',
    ' ░███    ░███ ',
    ' ░███████████ ',
    ' ░███░░░░░███ ',
    ' ░███    ░███ ',
    ' █████   █████',
    '░░░░░   ░░░░░ '
  ];

  $font{'B'} = [
    ' ███████████ ',
    '░░███░░░░░███',
    ' ░███    ░███',
    ' ░██████████ ',
    ' ░███░░░░░███',
    ' ░███    ░███',
    ' ███████████ ',
    '░░░░░░░░░░░  '
  ];

  $font{'C'} = [
    '   █████████ ',
    '  ███░░░░░███',
    ' ███     ░░░ ',
    '░███         ',
    '░███         ',
    '░░███     ███',
    ' ░░█████████ ',
    '  ░░░░░░░░░  '
  ];

  $font{'D'} = [
    ' ██████████  ',
    '░░███░░░░███ ',
    ' ░███   ░░███',
    ' ░███    ░███',
    ' ░███    ░███',
    ' ░███    ███ ',
    ' ██████████  ',
    '░░░░░░░░░░   '
  ];

  $font{'E'} = [
    ' ██████████',
    '░░███░░░░░█',
    ' ░███  █ ░ ',
    ' ░██████   ',
    ' ░███░░█   ',
    ' ░███ ░   █',
    ' ██████████',
    '░░░░░░░░░░ '
  ];

  $font{'F'} = [
    ' ███████████',
    '░░███░░░░░░█',
    ' ░███   █ ░ ',
    ' ░███████   ',
    ' ░███░░░█   ',
    ' ░███  ░    ',
    ' █████      ',
    '░░░░░       '
  ];

  $font{'G'} = [
    '   █████████ ',
    '  ███░░░░░███',
    ' ███     ░░░ ',
    '░███         ',
    '░███    █████',
    '░░███  ░░███ ',
    ' ░░█████████ ',
    '  ░░░░░░░░░  '
  ];

  $font{'H'} = [
    ' █████   █████',
    '░░███   ░░███ ',
    ' ░███    ░███ ',
    ' ░███████████ ',
    ' ░███░░░░░███ ',
    ' ░███    ░███ ',
    ' █████   █████',
    '░░░░░   ░░░░░ '
  ];

  $font{'I'} = [
    ' █████',
    '░░███ ',
    ' ░███ ',
    ' ░███ ',
    ' ░███ ',
    ' ░███ ',
    ' █████',
    '░░░░░ '
  ];

  $font{'J'} = [
    '       █████',
    '      ░░███ ',
    '       ░███ ',
    '       ░███ ',
    '       ░███ ',
    ' ███   ░███ ',
    '░░████████  ',
    ' ░░░░░░░░   '
  ];

  $font{'K'} = [
    ' █████   ████',
    '░░███   ███░ ',
    ' ░███  ███   ',
    ' ░███████    ',
    ' ░███░░███   ',
    ' ░███ ░░███  ',
    ' █████ ░░████',
    '░░░░░   ░░░░ '
  ];

  $font{'L'} = [
    ' █████      ',
    '░░███       ',
    ' ░███       ',
    ' ░███       ',
    ' ░███       ',
    ' ░███      █',
    ' ███████████',
    '░░░░░░░░░░░ '
  ];

  $font{'M'} = [
    ' ██████   ██████',
    '░░██████ ██████ ',
    ' ░███░█████░███ ',
    ' ░███░░███ ░███ ',
    ' ░███ ░░░  ░███ ',
    ' ░███      ░███ ',
    ' █████     █████',
    '░░░░░     ░░░░░ '
  ];

  $font{'N'} = [
    ' ██████   █████',
    '░░██████ ░░███ ',
    ' ░███░███ ░███ ',
    ' ░███░░███░███ ',
    ' ░███ ░░██████ ',
    ' ░███  ░░█████ ',
    ' █████  ░░█████',
    '░░░░░    ░░░░░ '
  ];

  $font{'O'} = [
    '    ███████   ',
    '  ███░░░░░███ ',
    ' ███     ░░███',
    '░███      ░███',
    '░███      ░███',
    '░░███     ███ ',
    ' ░░░███████░  ',
    '   ░░░░░░░    '
  ];

  $font{'P'} = [
    ' ███████████ ',
    '░░███░░░░░███',
    ' ░███    ░███',
    ' ░██████████ ',
    ' ░███░░░░░░  ',
    ' ░███        ',
    ' █████       ',
    '░░░░░        '
  ];

  $font{'Q'} = [
    '    ██████   ',
    '  ███░░░░███ ',
    ' ███    ░░███',
    '░███     ░███',
    '░███   ██░███',
    '░░███ ░░████ ',
    ' ░░░██████░██',
    '   ░░░░░░ ░░ '
  ];

  $font{'R'} = [
    ' ███████████  ',
    '░░███░░░░░███ ',
    ' ░███    ░███ ',
    ' ░██████████  ',
    ' ░███░░░░░███ ',
    ' ░███    ░███ ',
    ' █████   █████',
    '░░░░░   ░░░░░ '
  ];

  $font{'S'} = [
    '  █████████ ',
    ' ███░░░░░███',
    '░███    ░░░ ',
    '░░█████████ ',
    ' ░░░░░░░░███',
    ' ███    ░███',
    '░░█████████ ',
    ' ░░░░░░░░░  '
  ];

  $font{'T'} = [
    ' ███████████',
    '░█░░░███░░░█',
    '░   ░███  ░ ',
    '    ░███    ',
    '    ░███    ',
    '    ░███    ',
    '    █████   ',
    '   ░░░░░    '
  ];

  $font{'U'} = [
    ' █████  █████',
    '░░███  ░░███ ',
    ' ░███   ░███ ',
    ' ░███   ░███ ',
    ' ░███   ░███ ',
    ' ░███   ░███ ',
    ' ░░████████  ',
    '  ░░░░░░░░   '
  ];

  $font{'V'} = [
    ' █████   █████',
    '░░███   ░░███ ',
    ' ░███    ░███ ',
    ' ░███    ░███ ',
    ' ░░███   ███  ',
    '  ░░░█████░   ',
    '    ░░███     ',
    '     ░░░      '
  ];

  $font{'W'} = [
    ' █████   ███   █████',
    '░░███   ░███  ░░███ ',
    ' ░███   ░███   ░███ ',
    ' ░███   ░███   ░███ ',
    ' ░░███  █████  ███  ',
    '  ░░░█████░█████░   ',
    '    ░░███ ░░███     ',
    '     ░░░   ░░░      '
  ];

  $font{'X'} = [
    ' █████ █████',
    '░░███ ░░███ ',
    ' ░░███ ███  ',
    '  ░░█████   ',
    '   ███░███  ',
    '  ███ ░░███ ',
    ' █████ █████',
    '░░░░░ ░░░░░ '
  ];

  $font{'Y'} = [
    ' █████ █████',
    '░░███ ░░███ ',
    ' ░░███ ███  ',
    '  ░░█████   ',
    '   ░░███    ',
    '    ░███    ',
    '    █████   ',
    '   ░░░░░    '
  ];

  $font{'Z'} = [
    ' ███████████',
    '░█░░░░░░███ ',
    '░     ███░  ',
    '     ███    ',
    '    ███     ',
    '  ████     █',
    ' ███████████',
    '░░░░░░░░░░░ '
  ];

  $font{' '} = [
    '       ',
    '       ',
    '       ',
    '       ',
    '       ',
    '       ',
    '       ',
    '       '
  ];

  return %font;
}


sub _bt_font_doom {
  my %font;

  # Uppercase A-Z (6 rows in source, padded to 8 for mixed-case)
  $font{'A'} = [
    '  ___  ',
    ' / _ \\ ',
    '/ /_\\ \\',
    '|  _  |',
    '| | | |',
    '\\_| |_/',
    '       ',
    '       '
  ];

  $font{'B'} = [
    '______ ',
    '| ___ \\',
    '| |_/ /',
    '| ___ \\',
    '| |_/ /',
    '\\____/ ',
    '       ',
    '       '
  ];

  $font{'C'} = [
    ' _____ ',
    '/  __ \\',
    '| /  \\/',
    '| |    ',
    '| \\__/\\',
    ' \\____/',
    '       ',
    '       '
  ];

  $font{'D'} = [
    '______ ',
    '|  _  \\',
    '| | | |',
    '| | | |',
    '| |/ / ',
    '|___/  ',
    '       ',
    '       '
  ];

  $font{'E'} = [
    ' _____ ',
    '|  ___|',
    '| |__  ',
    '|  __| ',
    '| |___ ',
    '\\____/ ',
    '       ',
    '       '
  ];

  $font{'F'} = [
    '______ ',
    '|  ___|',
    '| |_   ',
    '|  _|  ',
    '| |    ',
    '\\_|    ',
    '       ',
    '       '
  ];

  $font{'G'} = [
    ' _____ ',
    '|  __ \\',
    '| |  \\/',
    '| | __ ',
    '| |_\\ \\',
    ' \\____/',
    '       ',
    '       '
  ];

  $font{'H'} = [
    ' _   _ ',
    '| | | |',
    '| |_| |',
    '|  _  |',
    '| | | |',
    '\\_| |_/',
    '       ',
    '       '
  ];

  $font{'I'} = [
    ' _____ ',
    '|_   _|',
    '  | |  ',
    '  | |  ',
    ' _| |_ ',
    ' \\___/ ',
    '       ',
    '       '
  ];

  $font{'J'} = [
    '   ___ ',
    '  |_  |',
    '    | |',
    '    | |',
    '/\\__/ /',
    '\\____/ ',
    '       ',
    '       '
  ];

  $font{'K'} = [
    ' _   __',
    '| | / /',
    '| |/ / ',
    '|    \\ ',
    '| |\\  \\',
    '\\_| \\_/',
    '       ',
    '       '
  ];

  $font{'L'} = [
    ' _     ',
    '| |    ',
    '| |    ',
    '| |    ',
    '| |____',
    '\\_____/',
    '       ',
    '       '
  ];

  $font{'M'} = [
    '___  ___',
    '|  \\/  |',
    '| .  . |',
    '| |\\/| |',
    '| |  | |',
    '\\_|  |_/',
    '        ',
    '        '
  ];

  $font{'N'} = [
    ' _   _ ',
    '| \\ | |',
    '|  \\| |',
    '| . ` |',
    '| |\\  |',
    '\\_| \\_/',
    '       ',
    '       '
  ];

  $font{'O'} = [
    ' _____ ',
    '|  _  |',
    '| | | |',
    '| | | |',
    '\\ \\_/ /',
    ' \\___/ ',
    '       ',
    '       '
  ];

  $font{'P'} = [
    '______ ',
    '| ___ \\',
    '| |_/ /',
    '|  __/ ',
    '| |    ',
    '\\_|    ',
    '       ',
    '       '
  ];

  $font{'Q'} = [
    ' _____ ',
    '|  _  |',
    '| | | |',
    '| | | |',
    '\\ \\/\' /',
    ' \\_/\\_\\',
    '       ',
    '       '
  ];

  $font{'R'} = [
    '______ ',
    '| ___ \\',
    '| |_/ /',
    '|    / ',
    '| |\\ \\ ',
    '\\_| \\_|',
    '       ',
    '       '
  ];

  $font{'S'} = [
    ' _____ ',
    '/  ___|',
    '\\ `--. ',
    ' `--. \\',
    '/\\__/ /',
    '\\____/ ',
    '       ',
    '       '
  ];

  $font{'T'} = [
    ' _____ ',
    '|_   _|',
    '  | |  ',
    '  | |  ',
    '  | |  ',
    '  \\_/  ',
    '       ',
    '       '
  ];

  $font{'U'} = [
    ' _   _ ',
    '| | | |',
    '| | | |',
    '| | | |',
    '| |_| |',
    ' \\___/ ',
    '       ',
    '       '
  ];

  $font{'V'} = [
    ' _   _ ',
    '| | | |',
    '| | | |',
    '| | | |',
    '\\ \\_/ /',
    ' \\___/ ',
    '       ',
    '       '
  ];

  $font{'W'} = [
    ' _    _ ',
    '| |  | |',
    '| |  | |',
    '| |/\\| |',
    '\\  /\\  /',
    ' \\/  \\/ ',
    '        ',
    '        '
  ];

  $font{'X'} = [
    '__   __',
    '\\ \\ / /',
    ' \\ V / ',
    ' /   \\ ',
    '/ /^\\ \\',
    '\\/   \\/',
    '       ',
    '       '
  ];

  $font{'Y'} = [
    '__   __',
    '\\ \\ / /',
    ' \\ V / ',
    '  \\ /  ',
    '  | |  ',
    '  \\_/  ',
    '       ',
    '       '
  ];

  $font{'Z'} = [
    ' ______',
    '|___  /',
    '   / / ',
    '  / /  ',
    './ /___',
    '\\_____/',
    '       ',
    '       '
  ];


  # Lowercase a-z (8 rows per char)
  $font{'a'} = [
    '       ',
    '       ',
    '  __ _ ',
    ' / _` |',
    '| (_| |',
    ' \\__,_|',
    '       ',
    '       '
  ];

  $font{'b'} = [
    ' _     ',
    '| |    ',
    '| |__  ',
    '| \'_ \\ ',
    '| |_) |',
    '|_.__/ ',
    '       ',
    '       '
  ];

  $font{'c'} = [
    '      ',
    '      ',
    '  ___ ',
    ' / __|',
    '| (__ ',
    ' \\___|',
    '      ',
    '      '
  ];

  $font{'d'} = [
    '     _ ',
    '    | |',
    '  __| |',
    ' / _` |',
    '| (_| |',
    ' \\__,_|',
    '       ',
    '       '
  ];

  $font{'e'} = [
    '      ',
    '      ',
    '  ___ ',
    ' / _ \\',
    '|  __/',
    ' \\___|',
    '      ',
    '      '
  ];

  $font{'f'} = [
    '  __ ',
    ' / _|',
    '| |_ ',
    '|  _|',
    '| |  ',
    '|_|  ',
    '     ',
    '     '
  ];

  $font{'g'} = [
    '       ',
    '       ',
    '  __ _ ',
    ' / _` |',
    '| (_| |',
    ' \\__, |',
    '  __/ |',
    ' |___/ '
  ];

  $font{'h'} = [
    ' _     ',
    '| |    ',
    '| |__  ',
    '| \'_ \\ ',
    '| | | |',
    '|_| |_|',
    '       ',
    '       '
  ];

  $font{'i'} = [
    ' _  ',
    '(_) ',
    ' _  ',
    '| | ',
    '| | ',
    '|_| ',
    '    ',
    '    '
  ];

  $font{'j'} = [
    '   _ ',
    '  (_)',
    '   _ ',
    '  | |',
    '  | |',
    '  | |',
    ' _/ |',
    '|__/ '
  ];

  $font{'k'} = [
    ' _    ',
    '| |   ',
    '| | __',
    '| |/ /',
    '|   < ',
    '|_|\\_\\',
    '      ',
    '      '
  ];

  $font{'l'} = [
    ' _ ',
    '| |',
    '| |',
    '| |',
    '| |',
    '|_|',
    '   ',
    '   '
  ];

  $font{'m'} = [
    '           ',
    '           ',
    ' _ __ ___  ',
    '| \'_ ` _ \\ ',
    '| | | | | |',
    '|_| |_| |_|',
    '           ',
    '           '
  ];

  $font{'n'} = [
    '       ',
    '       ',
    ' _ __  ',
    '| \'_ \\ ',
    '| | | |',
    '|_| |_|',
    '       ',
    '       '
  ];

  $font{'o'} = [
    '       ',
    '       ',
    '  ___  ',
    ' / _ \\ ',
    '| (_) |',
    ' \\___/ ',
    '       ',
    '       '
  ];

  $font{'p'} = [
    '       ',
    '       ',
    ' _ __  ',
    '| \'_ \\ ',
    '| |_) |',
    '| .__/ ',
    '| |    ',
    '|_|    '
  ];

  $font{'q'} = [
    '       ',
    '       ',
    '  __ _ ',
    ' / _` |',
    '| (_| |',
    ' \\__, |',
    '    | |',
    '    |_|'
  ];

  $font{'r'} = [
    '      ',
    '      ',
    ' _ __ ',
    '| \'__|',
    '| |   ',
    '|_|   ',
    '      ',
    '      '
  ];

  $font{'s'} = [
    '     ',
    '     ',
    ' ___ ',
    '/ __|',
    '\\__ \\',
    '|___/',
    '     ',
    '     '
  ];

  $font{'t'} = [
    ' _   ',
    '| |  ',
    '| |_ ',
    '| __|',
    '| |_ ',
    ' \\__|',
    '     ',
    '     '
  ];

  $font{'u'} = [
    '       ',
    '       ',
    ' _   _ ',
    '| | | |',
    '| |_| |',
    ' \\__,_|',
    '       ',
    '       '
  ];

  $font{'v'} = [
    '       ',
    '       ',
    '__   __',
    '\\ \\ / /',
    ' \\ V / ',
    '  \\_/  ',
    '       ',
    '       '
  ];

  $font{'w'} = [
    '          ',
    '          ',
    '__      __',
    '\\ \\ /\\ / /',
    ' \\ V  V / ',
    '  \\_/\\_/  ',
    '          ',
    '          '
  ];

  $font{'x'} = [
    '      ',
    '      ',
    '__  __',
    '\\ \\/ /',
    ' >  < ',
    '/_/\\_\\',
    '      ',
    '      '
  ];

  $font{'y'} = [
    '       ',
    '       ',
    ' _   _ ',
    '| | | |',
    '| |_| |',
    ' \\__, |',
    '  __/ |',
    ' |___/ '
  ];

  $font{'z'} = [
    '     ',
    '     ',
    ' ____',
    '|_  /',
    ' / / ',
    '/___|',
    '     ',
    '     '
  ];

  # Space
  $font{' '} = [
    '     ',
    '     ',
    '     ',
    '     ',
    '     ',
    '     ',
    '     ',
    '     '
  ];

  # Punctuation
  $font{'!'} = [
    ' _ ',
    '| |',
    '| |',
    '| |',
    '|_|',
    '(_)',
    '   ',
    '   '
  ];

  $font{'.'} = [
    '   ',
    '   ',
    '   ',
    '   ',
    ' _ ',
    '(_)',
    '   ',
    '   '
  ];

  $font{'-'} = [
    '      ',
    '      ',
    '      ',
    ' ____ ',
    '|____|',
    '      ',
    '      ',
    '      '
  ];

  $font{'\''} = [
    '\' ',
    '| ',
    '  ',
    '  ',
    '  ',
    '  ',
    '  ',
    '  '
  ];

  return %font;
}

1;
